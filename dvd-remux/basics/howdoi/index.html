
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Various guides on encoding by JET">
      
      
        <meta name="author" content="Jaded Encoding Thaumaturgy">
      
      
        <link rel="canonical" href="https://jaded-encoding-thaumaturgy.github.io/JET-guide/dvd-remux/basics/howdoi/">
      
      
        <link rel="prev" href="../python-primer/">
      
      
        <link rel="next" href="../babys-first-script/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.4">
    
    
      
        <title>How do I ...? - JET Encoding Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="purple" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-do-i" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="JET Encoding Guide" class="md-header__button md-logo" aria-label="JET Encoding Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            JET Encoding Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              How do I ...?
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Jaded-Encoding-Thaumaturgy/JET-Guide" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="JET Encoding Guide" class="md-nav__button md-logo" aria-label="JET Encoding Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    JET Encoding Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Jaded-Encoding-Thaumaturgy/JET-Guide" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Encoding Resources
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Basics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Basics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup and First Steps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../python-primer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A Primer on Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    How do I ...?
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    How do I ...?
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-do-i-cut-off-frames-at-the-beginningend-of-a-clip" class="md-nav__link">
    <span class="md-ellipsis">
      How do I cut off frames at the beginning/end of a clip?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-cut-out-a-section-of-frames-from-a-clip" class="md-nav__link">
    <span class="md-ellipsis">
      How do I cut out a section of frames from a clip?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-join-multiple-clips-together" class="md-nav__link">
    <span class="md-ellipsis">
      How do I join multiple clips together?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-stack-two-clips-on-top-of-one-another" class="md-nav__link">
    <span class="md-ellipsis">
      How do I stack two clips on top of one another?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-interleave-two-clips" class="md-nav__link">
    <span class="md-ellipsis">
      How do I interleave two clips?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-compare-multiple-clips" class="md-nav__link">
    <span class="md-ellipsis">
      How do I compare multiple clips?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-name-my-outputs" class="md-nav__link">
    <span class="md-ellipsis">
      How do I name my outputs?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-preview-a-vfr-clip-with-the-correct-frame-rates" class="md-nav__link">
    <span class="md-ellipsis">
      How do I preview a VFR clip with the correct frame rate(s)?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-get-the-lumachroma-of-a-clip" class="md-nav__link">
    <span class="md-ellipsis">
      How do I get the luma/chroma of a clip?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-combine-luma-and-chroma-into-a-clip-or-replace-planes-of-a-clip" class="md-nav__link">
    <span class="md-ellipsis">
      How do I combine luma and chroma into a clip, or replace planes of a clip?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-change-a-clips-bit-depth" class="md-nav__link">
    <span class="md-ellipsis">
      How do I change a clip's bit depth?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-retag-a-clips-color-matrixcolor-rangeetc" class="md-nav__link">
    <span class="md-ellipsis">
      How do I retag a clip's color matrix/color range/etc?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-convert-a-clips-color-matrixcolor-rangeetc" class="md-nav__link">
    <span class="md-ellipsis">
      How do I convert a clip's color matrix/color range/etc?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-apply-a-filter-to-only-some-frames-in-the-clip" class="md-nav__link">
    <span class="md-ellipsis">
      How do I apply a filter to only some frames in the clip?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-decide-at-runtime-whether-to-apply-a-filter-or-not" class="md-nav__link">
    <span class="md-ellipsis">
      How do I decide at runtime whether to apply a filter or not?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-apply-a-filter-to-only-a-certain-section-of-the-picture" class="md-nav__link">
    <span class="md-ellipsis">
      How do I apply a filter to only a certain section of the picture?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-access-or-modify-a-frames-content-in-python" class="md-nav__link">
    <span class="md-ellipsis">
      How do I access or modify a frame's content in Python?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-remove-artifacts-from-a-video-without-being-too-destructive" class="md-nav__link">
    <span class="md-ellipsis">
      How do I remove artifacts from a video without being too destructive?
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../babys-first-script/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Baby's first script
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Source Processing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Source Processing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sources/dvd-remux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Remuxing DVDs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sources/dvd-process.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Direct DVD processing
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Filtering
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Filtering
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filtering/order/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Order of Filtering Operations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Descaling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Descaling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filtering/descaling/descaling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Descaling Theory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filtering/descaling/known-resolutions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Known Native Resolutions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../filtering/dehardsubbing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dehardsubbing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://wobbly.encode.moe" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Wobbly ðŸ¡•
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Encoding
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Encoding
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../encoding/x264params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    x264 Parameters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../encoding/x265params/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    x265 Parameters
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Misc
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Misc
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../misc/comparison/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Comparison
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-do-i-cut-off-frames-at-the-beginningend-of-a-clip" class="md-nav__link">
    <span class="md-ellipsis">
      How do I cut off frames at the beginning/end of a clip?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-cut-out-a-section-of-frames-from-a-clip" class="md-nav__link">
    <span class="md-ellipsis">
      How do I cut out a section of frames from a clip?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-join-multiple-clips-together" class="md-nav__link">
    <span class="md-ellipsis">
      How do I join multiple clips together?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-stack-two-clips-on-top-of-one-another" class="md-nav__link">
    <span class="md-ellipsis">
      How do I stack two clips on top of one another?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-interleave-two-clips" class="md-nav__link">
    <span class="md-ellipsis">
      How do I interleave two clips?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-compare-multiple-clips" class="md-nav__link">
    <span class="md-ellipsis">
      How do I compare multiple clips?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-name-my-outputs" class="md-nav__link">
    <span class="md-ellipsis">
      How do I name my outputs?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-preview-a-vfr-clip-with-the-correct-frame-rates" class="md-nav__link">
    <span class="md-ellipsis">
      How do I preview a VFR clip with the correct frame rate(s)?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-get-the-lumachroma-of-a-clip" class="md-nav__link">
    <span class="md-ellipsis">
      How do I get the luma/chroma of a clip?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-combine-luma-and-chroma-into-a-clip-or-replace-planes-of-a-clip" class="md-nav__link">
    <span class="md-ellipsis">
      How do I combine luma and chroma into a clip, or replace planes of a clip?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-change-a-clips-bit-depth" class="md-nav__link">
    <span class="md-ellipsis">
      How do I change a clip's bit depth?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-retag-a-clips-color-matrixcolor-rangeetc" class="md-nav__link">
    <span class="md-ellipsis">
      How do I retag a clip's color matrix/color range/etc?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-convert-a-clips-color-matrixcolor-rangeetc" class="md-nav__link">
    <span class="md-ellipsis">
      How do I convert a clip's color matrix/color range/etc?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-apply-a-filter-to-only-some-frames-in-the-clip" class="md-nav__link">
    <span class="md-ellipsis">
      How do I apply a filter to only some frames in the clip?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-decide-at-runtime-whether-to-apply-a-filter-or-not" class="md-nav__link">
    <span class="md-ellipsis">
      How do I decide at runtime whether to apply a filter or not?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-apply-a-filter-to-only-a-certain-section-of-the-picture" class="md-nav__link">
    <span class="md-ellipsis">
      How do I apply a filter to only a certain section of the picture?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-access-or-modify-a-frames-content-in-python" class="md-nav__link">
    <span class="md-ellipsis">
      How do I access or modify a frame's content in Python?
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-do-i-remove-artifacts-from-a-video-without-being-too-destructive" class="md-nav__link">
    <span class="md-ellipsis">
      How do I remove artifacts from a video without being too destructive?
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="how-do-i">How do I ...?</h1>
<p>This page collects examples on how to perform simple tasks in VapourSynth.
It's mostly about how to shuffle clips around and how to convert between formats,
not about actual filtering.</p>
<p>Many of the things here can also be found on their respective documentation pages
(e.g. VapourSynth's <a href="http://www.vapoursynth.com/doc/pythonreference.html">Python Reference</a>
and <a href="http://www.vapoursynth.com/doc/functions.html">Function Reference</a>), so go there
if you need more details on any function.
The point of this page is to make the barrier to entry lower.</p>
<p>Some of the entries here list more than one way to achieve a certain goal.
For example, they may show both a way using only standard VapourSynth functions,
and a way using JET wrappers.
Apart from just providing multiple options, this is also done to show that many
of the wrappers around simple operations are not magic, and really just call
standard functions under the hood.
In the end, which method you use is up to you.
Unless otherwise stated, there isn't any relevant difference between them,
except for one option being easier to write than the other.</p>
<h3 id="how-do-i-cut-off-frames-at-the-beginningend-of-a-clip">How do I cut off frames at the beginning/end of a clip?</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Python Syntax</label><label for="__tabbed_1_2">Trim filter</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>Clips can be cut by simply slicing them like Python lists:</p>
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-5">5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-0-6">6</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span style="color: #E06C75">clip_cut</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">:]</span>    <span style="color: #7F848E"># Cut off 10 frames at the start</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span style="color: #E06C75">clip_cut</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #ABB2BF">[:</span><span style="color: #56B6C2">-</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">]</span>   <span style="color: #7F848E"># Cut off 10 frames at the end</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span style="color: #7F848E"># Start at frame 10 of the clip, and go up until frame 999.</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span style="color: #7F848E"># Frame 1000 is not included.</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span style="color: #E06C75">clip_cut</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">:</span><span style="color: #D19A66">1000</span><span style="color: #ABB2BF">]</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<p>Just like everything else, cutting clips can also be done via a filter invocation.
There's no real use for this
(unless you're doing fancy things like passing around filter functions as objects,
in which case you probably don't need to read this page),
except for knowing that slicing is not magic.</p>
<p>Note that the <a href="http://www.vapoursynth.com/doc/functions/video/trim.html">Trim filter</a>, unlike slicing, is inclusive.</p>
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-5">5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-1-6">6</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span style="color: #E06C75">clip_cut</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">Trim</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">first</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span>    <span style="color: #7F848E"># Cut off 10 frames at the start</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span style="color: #E06C75">clip_cut</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">Trim</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">length</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">num_frames</span> <span style="color: #56B6C2">-</span> <span style="color: #D19A66">10</span><span style="color: #ABB2BF">)</span>   <span style="color: #7F848E"># Cut off 10 frames at the end</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span style="color: #7F848E"># Start at frame 10 of the clip, and go up until frame 1000,</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span style="color: #7F848E"># which is included.</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span style="color: #E06C75">clip_cut</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">Trim</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">first</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">last</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">1000</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="how-do-i-cut-out-a-section-of-frames-from-a-clip">How do I cut out a section of frames from a clip?</h3>
<p>See above.</p>
<h3 id="how-do-i-join-multiple-clips-together">How do I join multiple clips together?</h3>
<p>Clips can be joined by simply using the <code>+</code> operator in Python:
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-2-1">1</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span style="color: #E06C75">clip_joined</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip1</span> <span style="color: #56B6C2">+</span> <span style="color: #E06C75">clip2</span> <span style="color: #56B6C2">+</span> <span style="color: #E06C75">clip3</span>
</code></pre></div></td></tr></table></div>
If you need to join many clips together, or have a list of clips,
it may be simpler to use <a href="http://www.vapoursynth.com/doc/functions/video/splice.html"><code>core.std.Splice</code></a>:
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-3-1">1</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span style="color: #E06C75">clip_joined</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">core</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">Splice</span><span style="color: #ABB2BF">([</span><span style="color: #E06C75">clip1</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">clip2</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">clip3</span><span style="color: #ABB2BF">])</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="how-do-i-stack-two-clips-on-top-of-one-another">How do I stack two clips on top of one another?</h3>
<p>This can be done with <a href="http://www.vapoursynth.com/doc/functions/video/stackvertical_stackhorizontal.html"><code>core.std.StackVertical</code></a>.
But chances are that you are asking this because you want to compare the clips with one another.
Unless you want to check if the clips are synced, chances are you want to use <a href="#how-do-i-compare-multiple-clips">multiple output nodes</a> to compare them instead.</p>
<h3 id="how-do-i-interleave-two-clips">How do I interleave two clips?</h3>
<p>This can be done with <a href="http://www.vapoursynth.com/doc/functions/video/interleave.html"><code>core.std.Interleave</code></a>.
But chances are that you are asking this because you want to compare the clips with one another.
Unless you want to check if the clips are synced, chances are you want to use <a href="#how-do-i-compare-multiple-clips">multiple output nodes</a> to compare them instead.</p>
<h3 id="how-do-i-compare-multiple-clips">How do I compare multiple clips?</h3>
<p>Set the clips you want to compare as outputs.
Then, open the script in vs-preview (see the <a href="../setup/">Setup</a> page)
and use the number keys to switch between outputs.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">vs-tools</label><label for="__tabbed_2_2">Vanilla VS</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-4-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-4-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-4-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-4-4">4</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vstools</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">import</span> <span style="color: #E06C75">set_output</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span style="color: #E06C75">set_output</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip1</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span style="color: #E06C75">set_output</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip2</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-5-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-5-2">2</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span style="color: #E06C75">clip1</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">set_output</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span style="color: #E06C75">clip2</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">set_output</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="how-do-i-name-my-outputs">How do I name my outputs?</h3>
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-6-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-6-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-6-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-6-4">4</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vstools</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">import</span> <span style="color: #E06C75">set_output</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span style="color: #E06C75">set_output</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip1</span><span style="color: #ABB2BF">,</span> <span style="color: #98C379">&quot;My first clip&quot;</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span style="color: #E06C75">set_output</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip2</span><span style="color: #ABB2BF">,</span> <span style="color: #98C379">&quot;My second clip&quot;</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div>
<p>Note that the names will only show up in vs-preview and not in other previewers.</p>
<h3 id="how-do-i-preview-a-vfr-clip-with-the-correct-frame-rates">How do I preview a VFR clip with the correct frame rate(s)?</h3>
<p>Pass a timecodes file to <code>set_output</code>:</p>
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-7-3">3</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vstools</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">import</span> <span style="color: #E06C75">set_output</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span style="color: #E06C75">set_output</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">timecodes</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;timecodes.txt&quot;</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div>
<p>You can also pass a <code>Timecodes</code> object (which you could generate at runtime, or modify):
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-8-4">4</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vstools</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">import</span> <span style="color: #E06C75">set_output</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">Timecodes</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span style="color: #E06C75">timecodes</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">Timecodes</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">from_file</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;timecodes.txt&quot;</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span style="color: #E06C75">set_output</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">timecodes</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">timecodes</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div></p>
<p>You can generate a <code>Timecodes</code> object from a clip's per-frame <code>_DurationNum</code> and <code>_DurationDen</code> properties,
but note that this is very slow since it needs to go through the entire clip.
One useful method is to generate them once and then save them to a file.
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-1"> 1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-2"> 2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-3"> 3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-4"> 4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-5"> 5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-6"> 6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-7"> 7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-8"> 8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-9"> 9</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-10">10</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-9-11">11</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">os.path</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vstools</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">import</span> <span style="color: #E06C75">set_output</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">Timecodes</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span style="color: #E06C75">TIMECODES_NAME</span> <span style="color: #56B6C2">=</span> <span style="color: #98C379">&quot;timecodes.txt&quot;</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span style="color: #C678DD">if</span> <span style="color: #56B6C2">not</span> <span style="color: #E06C75">os</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">path</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">isfile</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">TIMECODES_NAME</span><span style="color: #ABB2BF">):</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a>    <span style="color: #E06C75">timecodes</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">Timecodes</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">from_clip</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a>    <span style="color: #E06C75">timecodes</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">to_file</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">TIMECODES_NAME</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span style="color: #E06C75">timecodes</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">Timecodes</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">from_file</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">TIMECODES_NAME</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span style="color: #E06C75">set_output</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">timecodes</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">timecodes</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div>
Remember to regenerate your timecodes file whenever the clip's frames or frame rate change.
With the above code, this can be done by just deleting the timecodes file.</p>
<h3 id="how-do-i-get-the-lumachroma-of-a-clip">How do I get the luma/chroma of a clip?</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">vs-tools</label><label for="__tabbed_3_2">Vanilla VS</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-1"> 1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-2"> 2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-3"> 3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-4"> 4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-5"> 5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-6"> 6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-7"> 7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-8"> 8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-9"> 9</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-10">10</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-11">11</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-12">12</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-10-13">13</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vstools</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">import</span> <span style="color: #E06C75">get_y</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">get_u</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">get_v</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">split</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">plane</span>
<a id="__codelineno-10-2" name="__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3"></a><span style="color: #E06C75">y</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">get_y</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">)</span>     <span style="color: #7F848E"># Luma</span>
<a id="__codelineno-10-4" name="__codelineno-10-4"></a><span style="color: #E06C75">u</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">get_u</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">)</span>     <span style="color: #7F848E"># First chroma plane</span>
<a id="__codelineno-10-5" name="__codelineno-10-5"></a><span style="color: #E06C75">v</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">get_v</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">)</span>     <span style="color: #7F848E"># Second chroma plane</span>
<a id="__codelineno-10-6" name="__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7"></a><span style="color: #7F848E"># Alternatively, you can use `split`:</span>
<a id="__codelineno-10-8" name="__codelineno-10-8"></a><span style="color: #E06C75">y</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">u</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">v</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">split</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-10-9" name="__codelineno-10-9"></a>
<a id="__codelineno-10-10" name="__codelineno-10-10"></a><span style="color: #7F848E"># Or, you can use the `plane` function:</span>
<a id="__codelineno-10-11" name="__codelineno-10-11"></a><span style="color: #E06C75">y</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">plane</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-10-12" name="__codelineno-10-12"></a><span style="color: #E06C75">u</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">plane</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">1</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-10-13" name="__codelineno-10-13"></a><span style="color: #E06C75">v</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">plane</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">2</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div>
If you want to split an RGB clip instead, you'll need to use the equivalent <code>get_r</code>, <code>get_g</code>, <code>get_b</code> functions.</p>
</div>
<div class="tabbed-block">
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-11-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-11-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-11-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-11-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-11-5">5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-11-6">6</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span style="color: #E06C75">y</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">ShufflePlanes</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">planes</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">colorfamily</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">GRAY</span><span style="color: #ABB2BF">)</span>   <span style="color: #7F848E"># Luma</span>
<a id="__codelineno-11-2" name="__codelineno-11-2"></a><span style="color: #E06C75">u</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">ShufflePlanes</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">planes</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">colorfamily</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">GRAY</span><span style="color: #ABB2BF">)</span>   <span style="color: #7F848E"># First chroma plane</span>
<a id="__codelineno-11-3" name="__codelineno-11-3"></a><span style="color: #E06C75">v</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">ShufflePlanes</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">planes</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">colorfamily</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">GRAY</span><span style="color: #ABB2BF">)</span>   <span style="color: #7F848E"># Second chroma plane</span>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5"></a><span style="color: #7F848E"># Or, to get all three planes:</span>
<a id="__codelineno-11-6" name="__codelineno-11-6"></a><span style="color: #E06C75">y</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">u</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">v</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">SplitPlanes</span><span style="color: #ABB2BF">()</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>If you only want to <em>see</em> the individual planes of a clip,
and not process them, you may want to use vs-preview's "Split Planes" plugin instead (see the <a href="../setup/">Setup</a> page).</p>
<h3 id="how-do-i-combine-luma-and-chroma-into-a-clip-or-replace-planes-of-a-clip">How do I combine luma and chroma into a clip, or replace planes of a clip?</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">vs-tools</label><label for="__tabbed_4_2">Vanilla VS</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-1"> 1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-2"> 2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-3"> 3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-4"> 4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-5"> 5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-6"> 6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-7"> 7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-8"> 8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-9"> 9</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-12-10">10</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vstools</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">import</span> <span style="color: #E06C75">join</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span style="color: #7F848E"># Join luma and chroma</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span style="color: #E06C75">joined</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">join</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">y</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">u</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">v</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a><span style="color: #7F848E"># Replace chroma in a YUV clip</span>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a><span style="color: #E06C75">clip_replaced</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">join</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">u</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">v</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a><span style="color: #7F848E"># Replace luma in a YUV clip</span>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a><span style="color: #E06C75">clip_replaced</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">join</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">y</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">clip</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-13-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-13-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-13-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-13-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-13-5">5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-13-6">6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-13-7">7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-13-8">8</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span style="color: #7F848E"># Join luma and chroma</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span style="color: #E06C75">joined</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">core</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">ShufflePlanes</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clips</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">[</span><span style="color: #E06C75">y</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">u</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">v</span><span style="color: #ABB2BF">],</span> <span style="color: #E06C75">planes</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">0</span><span style="color: #ABB2BF">],</span> <span style="color: #E06C75">colorfamily</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">YUV</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span style="color: #7F848E"># Replace chroma in a YUV clip</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span style="color: #E06C75">clip_replaced</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">core</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">ShufflePlanes</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clips</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">[</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">u</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">v</span><span style="color: #ABB2BF">],</span> <span style="color: #E06C75">planes</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">0</span><span style="color: #ABB2BF">],</span> <span style="color: #E06C75">colorfamily</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">YUV</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span style="color: #7F848E"># Replace luma in a YUV clip</span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><span style="color: #E06C75">clip_replaced</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">core</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">ShufflePlanes</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clips</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">[</span><span style="color: #E06C75">y</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">clip</span><span style="color: #ABB2BF">],</span> <span style="color: #E06C75">planes</span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">1</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">2</span><span style="color: #ABB2BF">],</span> <span style="color: #E06C75">colorfamily</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">YUV</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="how-do-i-change-a-clips-bit-depth">How do I change a clip's bit depth?</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">vs-tools</label><label for="__tabbed_5_2">Vanilla VS</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-14-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-14-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-14-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-14-4">4</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vstools</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">import</span> <span style="color: #E06C75">depth</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span style="color: #E06C75">clip_i16</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">depth</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">16</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span style="color: #E06C75">clip_float</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">depth</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">32</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-15-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-15-2">2</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span style="color: #E06C75">clip_i16</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">resize</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">Point</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">format</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">format</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">replace</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">bits_per_sample</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">16</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">sample_type</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">INTEGER</span><span style="color: #ABB2BF">))</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span style="color: #E06C75">clip_float</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">resize</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">Point</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">format</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">format</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">replace</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">bits_per_sample</span><span style="color: #56B6C2">=</span><span style="color: #D19A66">32</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">sample_type</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">FLOAT</span><span style="color: #ABB2BF">))</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Note that the vanilla VS version does not dither by default, while <code>vstools.depth</code> does dither when necessary.
With both versions the dither type can be set in a parameter.</p>
<h3 id="how-do-i-retag-a-clips-color-matrixcolor-rangeetc">How do I retag a clip's color matrix/color range/etc?</h3>
<p>Retagging only changes the metadata (here in the form of frame properties) without changing any of the pixel values.
(But of course filters called on this clip may behave differently based on the metadata, which is the entire point.
In particular your clip will display differently in vs-preview, even though the pixel values are the same.)</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">vs-tools</label><label for="__tabbed_6_2">Vanilla VS</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-16-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-16-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-16-3">3</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vstools</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">import</span> <span style="color: #E06C75">Matrix</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">ColorRange</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span style="color: #E06C75">clip_retagged</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">Matrix</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">SMPTE170M</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">apply</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">ColorRange</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">FULL</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">apply</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">))</span>
</code></pre></div></td></tr></table></div>
</div>
<div class="tabbed-block">
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-17-1">1</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span style="color: #E06C75">clip_retagged</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">SetFrameProps</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">_Matrix</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">MATRIX_BT601</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">_Range</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">RANGE_FULL</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h3 id="how-do-i-convert-a-clips-color-matrixcolor-rangeetc">How do I convert a clip's color matrix/color range/etc?</h3>
<p>Tag your clip as the source matrix/range/etc and use the <a href="http://www.vapoursynth.com/doc/functions/video/resize.html"><code>core.resize</code></a>
function to convert it to the target matrix/range/etc.</p>
<p>Converting color matrix/range/etc will change the pixel values as well as the metadata,
so the resulting clip will look the same in a previewer (except for subtle differences due to dithering, etc)
even though the pixel values are different.</p>
<p><div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-5">5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-6">6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-7">7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-18-8">8</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vstools</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">import</span> <span style="color: #E06C75">Matrix</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">ColorRange</span>  <span style="color: #7F848E"># You can also use Vanilla VS, see above</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span style="color: #7F848E"># Convert a clip from the SMPTE170M matrix to the BT709 matrix</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span style="color: #E06C75">clip_converted</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">core</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">resize</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">Point</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">Matrix</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">SMPTE170M</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">apply</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">),</span> <span style="color: #E06C75">matrix</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">Matrix</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">BT709</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><span style="color: #7F848E"># Convert a clip from limited range to full range</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a><span style="color: #7F848E"># Note that you have to append `.value_zimg` to the `range` argument here! Otherwise it would pass the wrong value (or just do `range=1`).</span>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a><span style="color: #E06C75">clip_converted</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">core</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">resize</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">Point</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">ColorRange</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">LIMITED</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">apply</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">),</span> <span style="color: #E5C07B">range</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">ColorRange</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">LIMITED</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">value_zimg</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div>
Note that the resizing does not dither by default. That does not mean you <em>should</em> dither
(usually it's better practice to do most of your filter chain with float clips, and then dither down at the end),
but you should be aware of it.</p>
<p>Also note that converting color matrix, transfer, or primaries (but not range or chroma location)
requires upscaling chroma to the luma's size.
The above code assumes a YUV444 clip;
it will <em>work</em> with YUV420 clips, but the output will not be good since it uses Point to resize.
However, you shouldn't simply replace <code>Point</code> with another scaler like <code>Lanczos</code>,
since that scaler would be used for both upscaling and downscaling.
It's better to explicitly upscale to YUV444 first (using, say, <code>Lanczos</code>), convert the color space,
and then eventually downscale back to YUV420 again (using, say, Hermite, i.e. <code>Bicubic</code> with b=c=0).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not use the <code>matrix_in</code>/<code>range_in</code>/etc family of arguments to convert color spaces.
Frame properties, when present, take precedence over these arguments, which can lead to very unexpected behavior.
Hence you should instead be overwriting the frame properties, as done in the snippet above.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Color range needs special treatment here, as shown in the above snippet.
The meaning of the values <code>0</code> and <code>1</code> is flipped between the <code>_ColorRange</code> frame property and
the <code>core.resize</code> function.
In the frame property, <code>0</code> means full and <code>1</code> means limited (<a href="http://www.vapoursynth.com/doc/apireference.html#reserved-frame-properties">docs</a>),
but in <code>core.resize</code> it's the other way around (<a href="http://www.vapoursynth.com/doc/functions/video/resize.html">docs</a>).</p>
</div>
<p>Alternatively, you can use <a href="https://amusementclub.github.io/fmtconv/doc/fmtconv.html">fmtconv</a>.</p>
<h3 id="how-do-i-apply-a-filter-to-only-some-frames-in-the-clip">How do I apply a filter to only some frames in the clip?</h3>
<p>Unless the filter is a temporal one and you specifically want it to <em>only</em> get your selected frames as an input,
the simplest way is to apply the filter to the entire clip and then replace the desired frames afterwards:</p>
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-19-4">4</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span style="color: #E06C75">filtered</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">BoxBlur</span><span style="color: #ABB2BF">()</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span style="color: #7F848E"># only blur frames 10 through 19 (excluding frame 20)</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span style="color: #E06C75">partially_filtered</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #ABB2BF">[:</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">]</span> <span style="color: #56B6C2">+</span> <span style="color: #E06C75">filtered</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">:</span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">]</span> <span style="color: #56B6C2">+</span> <span style="color: #E06C75">clip</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">:]</span>
</code></pre></div></td></tr></table></div>
<p>For more convenience, you can use the <code>replace_ranges</code> function to avoid having to manually slice all the clips.
This can also be more performant when you have many ranges to replace.</p>
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-1"> 1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-2"> 2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-3"> 3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-4"> 4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-5"> 5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-6"> 6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-7"> 7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-8"> 8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-9"> 9</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-10">10</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-20-11">11</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vstools</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">import</span> <span style="color: #E06C75">replace_ranges</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span style="color: #7F848E"># Replace frames 10 through 19, including 19. `replace_ranges` ranges are inclusive, unless you set `exclusive=True`.</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span style="color: #E06C75">MY_FRAME_RANGES</span> <span style="color: #56B6C2">=</span> <span style="color: #ABB2BF">[(</span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">19</span><span style="color: #ABB2BF">)]</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a><span style="color: #7F848E"># You could also use multiple ranges, and you can use None to denote the left/right end of the clip.</span>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><span style="color: #7F848E"># Check the function docstring for more info.</span>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a><span style="color: #7F848E"># This would replace frames 10 through 19 and all frames starting from frame 200.</span>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a><span style="color: #7F848E"># MY_FRAME_RANGES = [(10, 19), (200, None)]</span>
<a id="__codelineno-20-10" name="__codelineno-20-10"></a>
<a id="__codelineno-20-11" name="__codelineno-20-11"></a><span style="color: #E06C75">partially_filtered</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">replace_ranges</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">filtered</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">MY_FRAME_RANGES</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div>
<p>Don't worry, even though you give the entire <code>clip</code> as an input to your filter,
the filter will not actually run on the frames not added to <code>partially_filtered</code>
when you set <code>partially_filtered</code> (or another clip based on it) as an output.
Filters are only run on frames when the frame is requested.</p>
<h3 id="how-do-i-decide-at-runtime-whether-to-apply-a-filter-or-not">How do I decide at runtime whether to apply a filter or not?</h3>
<p>Unless you want to write your own plugin, the way to do this is with <a href="http://www.vapoursynth.com/doc/functions/video/frameeval.html"><code>FrameEval</code></a>:</p>
<p>For example, to blur all frames whose average luma is larger than 0.5 (assume the clip is a float clip):
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-21-1"> 1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-21-2"> 2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-21-3"> 3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-21-4"> 4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-21-5"> 5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-21-6"> 6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-21-7"> 7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-21-8"> 8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-21-9"> 9</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-21-10">10</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-21-11">11</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-21-12">12</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span style="color: #E06C75">blurred</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">BoxBlur</span><span style="color: #ABB2BF">()</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span style="color: #E06C75">stats</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">PlaneStats</span><span style="color: #ABB2BF">()</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF; font-weight: bold">blur_some_frames</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">n</span><span style="color: #ABB2BF">:</span> <span style="color: #E5C07B">int</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">f</span><span style="color: #ABB2BF">:</span> <span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">VideoFrame</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">clip</span><span style="color: #ABB2BF">:</span> <span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">VideoNode</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">blurred</span><span style="color: #ABB2BF">:</span> <span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">VideoNode</span><span style="color: #ABB2BF">)</span> <span style="color: #56B6C2">-&gt;</span> <span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">VideoNode</span><span style="color: #ABB2BF">:</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a>    <span style="color: #C678DD">if</span> <span style="color: #E06C75">f</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">props</span><span style="color: #ABB2BF">[</span><span style="color: #98C379">&quot;PlaneStatsAverage&quot;</span><span style="color: #ABB2BF">]</span> <span style="color: #56B6C2">&gt;</span> <span style="color: #D19A66">0.5</span><span style="color: #ABB2BF">:</span>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a>        <span style="color: #C678DD">return</span> <span style="color: #E06C75">blurred</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a>    <span style="color: #C678DD">return</span> <span style="color: #E06C75">clip</span>
<a id="__codelineno-21-8" name="__codelineno-21-8"></a>
<a id="__codelineno-21-9" name="__codelineno-21-9"></a><span style="color: #E06C75">partially_blurred</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">FrameEval</span><span style="color: #ABB2BF">(</span>
<a id="__codelineno-21-10" name="__codelineno-21-10"></a>    <span style="color: #E5C07B">eval</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">partial</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">blur_some_frames</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">blurred</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">blurred</span><span style="color: #ABB2BF">),</span>
<a id="__codelineno-21-11" name="__codelineno-21-11"></a>    <span style="color: #E06C75">prop_src</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">stats</span>
<a id="__codelineno-21-12" name="__codelineno-21-12"></a>    <span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div></p>
<p>Try not to instantiate filters inside of the per-frame function, if possible.
Note how the above snippet creates the <code>blurred</code> and <code>stats</code> clips outside of the function,
and only references them inside the function.
This makes the filter only be applied once, instead of once for every frame.
Of course you cannot do this if the filter parameters need to vary per frame.
In that case, you need to be very careful when your filter's instantiation is very resource-heavy.</p>
<h3 id="how-do-i-apply-a-filter-to-only-a-certain-section-of-the-picture">How do I apply a filter to only a certain section of the picture?</h3>
<p>In general this depends very strongly on what filter you're using and what you want to achieve.
One common answer, however, is to apply the filter to the entire frame and do a masked merge with the original clip.</p>
<p>For example, to only blur a certain rectangle in the frame:
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-4">4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-5">5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-6">6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-7">7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-22-8">8</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vsmasktools</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">import</span> <span style="color: #E06C75">squaremask</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span style="color: #7F848E"># a 200x200 rectangle whose top left corner is at (500, 500)</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span style="color: #E06C75">mask</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">squaremask</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">200</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">200</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">500</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">500</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span style="color: #E06C75">blurred</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">BoxBlur</span><span style="color: #ABB2BF">()</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a><span style="color: #E06C75">partially_blurred</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">core</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">MaskedMerge</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">blurred</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">mask</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div>
In fact, for the specific purpose of a square mask there exists an even simpler wrapper function
(but I showed you the longer snippet to illustrate the general process):
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-23-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-23-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-23-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-23-4">4</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vsmasktools</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">import</span> <span style="color: #E06C75">replace_squaremask</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span style="color: #E06C75">blurred</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">BoxBlur</span><span style="color: #ABB2BF">()</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span style="color: #E06C75">partially_blurred</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">replace_squaremask</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">blurred</span><span style="color: #ABB2BF">,</span> <span style="color: #ABB2BF">(</span><span style="color: #D19A66">200</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">200</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">500</span><span style="color: #ABB2BF">,</span> <span style="color: #D19A66">500</span><span style="color: #ABB2BF">))</span>
</code></pre></div></td></tr></table></div>
Other ways to build masks include:
- Manually building a square mask using a <code>core.std.BlankClip</code> followed by <code>core.std.AddBorders</code>.
  There's no real reason to do this except to understand how <code>squaremask</code> might work internally.
- Manually building a mask with <code>core.akarin.Expr</code>, using an expression that computes the mask value based on the position.
- Building a mask using certain filters (e.g. edge masks) or manual expressions based on the pixel values
- Manually drawing a mask in an image editor and importing it from a file
- Drawing a mask using subtitle drawings in <a href="https://aegisub.org">Aegisub</a>, and rendering the resulting
  subtitle line using the <a href="https://github.com/vapoursynth/subtext/blob/master/docs/subtext.rst"><code>core.sub</code></a> plugin</p>
<h3 id="how-do-i-access-or-modify-a-frames-content-in-python">How do I access or modify a frame's content in Python?</h3>
<p>Unless you know what you're doing, chances are that you shouldn't be doing this.
Modifying frame contents in Python is slow and not the way VapourSynth is intended to be used.
You should instead see if there is a plugin that applies the filter you want to apply,
or write such a plugin if there isn't.
If you want to apply some custom formula to a frame's pixels,
you can use the <a href="http://www.vapoursynth.com/doc/functions/video/expr.html"><code>core.std.Expr</code></a>
or the more powerful third-party <a href="https://github.com/Jaded-Encoding-Thaumaturgy/akarin-vapoursynth-plugin?tab=readme-ov-file#expr"><code>core.akarin.Expr</code></a> functions.</p>
<p>That said, accessing frame data from Python <em>can</em> be useful when you're trying out some new filter idea
and want to prototype using tools like numpy.</p>
<p>To read a frame's contents into a numpy array:
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-24-1">1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-24-2">2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-24-3">3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-24-4">4</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">numpy</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">as</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">np</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span style="color: #7F848E"># Get the first plane of frame 100 as a numpy array of shape (clip.height, clip.width)</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span style="color: #E06C75">data</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">np</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">asarray</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">get_frame</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">)[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">])</span>
</code></pre></div></td></tr></table></div></p>
<p>To modify a frame's contents:
<div class="highlight" style="background: #282C34"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-1"> 1</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-2"> 2</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-3"> 3</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-4"> 4</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-5"> 5</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-6"> 6</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-7"> 7</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-8"> 8</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-9"> 9</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-10">10</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-11">11</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-12">12</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-13">13</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-14">14</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-15">15</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-16">16</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-17">17</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-18">18</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-19">19</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-20">20</a></span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"><a href="#__codelineno-25-21">21</a></span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span style="color: #C678DD">def</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF; font-weight: bold">modify</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">f</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">n</span><span style="color: #ABB2BF">):</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a>    <span style="color: #7F848E"># Do the necessary imports inside of the function.</span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a>    <span style="color: #7F848E"># Doing them globally can cause issues in some scenarios,</span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a>    <span style="color: #7F848E"># since they may be dropped before the function is executed</span>
<a id="__codelineno-25-5" name="__codelineno-25-5"></a>    <span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">numpy</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">as</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">np</span>
<a id="__codelineno-25-6" name="__codelineno-25-6"></a>
<a id="__codelineno-25-7" name="__codelineno-25-7"></a>    <span style="color: #E06C75">src</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">np</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">asarray</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">f</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">][</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">])</span>
<a id="__codelineno-25-8" name="__codelineno-25-8"></a>
<a id="__codelineno-25-9" name="__codelineno-25-9"></a>    <span style="color: #7F848E"># The dimensions and dtype of `res` need to match the dimensions and format of `blank` below</span>
<a id="__codelineno-25-10" name="__codelineno-25-10"></a>    <span style="color: #E06C75">res</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">np</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">zeros</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75">your_target_height</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">your_target_width</span><span style="color: #ABB2BF">),</span> <span style="color: #E06C75">dtype</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">np</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">float32</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-25-11" name="__codelineno-25-11"></a>
<a id="__codelineno-25-12" name="__codelineno-25-12"></a>    <span style="color: #7F848E"># Write some data into `res` here</span>
<a id="__codelineno-25-13" name="__codelineno-25-13"></a>
<a id="__codelineno-25-14" name="__codelineno-25-14"></a>    <span style="color: #E06C75">dst</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">f</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">copy</span><span style="color: #ABB2BF">()</span>
<a id="__codelineno-25-15" name="__codelineno-25-15"></a>    <span style="color: #E06C75">np</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">copyto</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">np</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">asarray</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">dst</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]),</span> <span style="color: #E06C75">res</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-25-16" name="__codelineno-25-16"></a>    <span style="color: #C678DD">return</span> <span style="color: #E06C75">dst</span>
<a id="__codelineno-25-17" name="__codelineno-25-17"></a>
<a id="__codelineno-25-18" name="__codelineno-25-18"></a><span style="color: #7F848E"># Set up a blank clip with your desired output width/height/format</span>
<a id="__codelineno-25-19" name="__codelineno-25-19"></a><span style="color: #7F848E"># (which can differ from your input clip&#39;s format)</span>
<a id="__codelineno-25-20" name="__codelineno-25-20"></a><span style="color: #E06C75">blank</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">clip</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">BlankClip</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">your_target_height</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">your_target_width</span><span style="color: #ABB2BF">,</span> <span style="color: #E5C07B">format</span><span style="color: #56B6C2">=</span><span style="color: #E06C75">vs</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">GRAYS</span><span style="color: #ABB2BF">)</span>
<a id="__codelineno-25-21" name="__codelineno-25-21"></a><span style="color: #E06C75">result</span> <span style="color: #56B6C2">=</span> <span style="color: #E06C75">core</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">std</span><span style="color: #56B6C2">.</span><span style="color: #E06C75">ModifyFrame</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">blank</span><span style="color: #ABB2BF">,</span> <span style="color: #ABB2BF">[</span><span style="color: #E06C75">blank</span><span style="color: #ABB2BF">,</span> <span style="color: #E06C75">clip</span><span style="color: #ABB2BF">],</span> <span style="color: #E06C75">modify</span><span style="color: #ABB2BF">)</span>
</code></pre></div></td></tr></table></div></p>
<h3 id="how-do-i-remove-artifacts-from-a-video-without-being-too-destructive">How do I remove artifacts from a video without being too destructive?</h3>
<p>Very carefully.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select", "navigation.expand"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
    
  </body>
</html>